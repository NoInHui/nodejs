<div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵과 위크셋</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 가비지 컬렉션에서 배웠듯이 자바스크립트 엔진은 도달 가능한 값을 메모리에 유지합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 자료구조를 구성하는 요소도 자신이 속한 자료구조가 메모리에 남아있는 동안 대개 도달 가능한 값으로 취급되어 메모리에서 삭제되지 않습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 객체의 프로퍼티나 배열의 요소, 맵이나 셋을 구성하는 요소들이 이에 해당합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 예를 들어봅시다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 배열에 객체 하나를 추가해 보겠습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이떄 배열이 메모리에 남아있는 한, 배열의 요소인 이 객체도 메모리에 남아있게 됩니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이 객체를 참조하는 것이 아무것도 없더라도 말이죠.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj1</span><span style="font-size: 10pt;"> = {</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">name</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'inhui'</span><span style="font-size: 10pt;">};</span></div><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">array1</span><span style="font-size: 10pt;"> = [</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj1</span><span style="font-size: 10pt;">];</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj1</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">null</span><span style="font-size: 10pt;">; </span><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 참조를 null 로 덮어씀</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// obj1을 나타내는 객체는 배열의 요소이기 때문에 가비지 컬렉터의 대상이 되지 않습니다.</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">array1</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj1</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 맵에서 객체를 키로 사용한 경우 역시, 맵이 메모리에 있는 한 객체도 메모리에 남습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 가비지 컬렉터의 대상이 되지 않죠.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj2</span><span style="font-size: 10pt;"> = {</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">name</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'inhui'</span><span style="font-size: 10pt;">};</span></div><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">map1</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">new</span><span style="font-size: 10pt;"> </span><span style="color: rgb(78, 201, 176); font-size: 10pt;">Map</span><span style="font-size: 10pt;">();</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">map1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">set</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj2</span><span style="font-size: 10pt;">, </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'123'</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj2</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">null</span><span style="font-size: 10pt;">;</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">map1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">entries</span><span style="font-size: 10pt;">());</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이런 관점에서 위크맵(WeekMap) 은 일반 맵과 전혀 다른 양상을 보입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵을 사용하면 키로 쓰인 객체가 가비지 컬렉션의 대상이 됩니다.</span></div><br><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 맵과 위크맵의 첫 번째 차이는 위크맵의 키가 반드시 객체여야 한다는 점입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 원시값은 위크맵의 키가 될 수 없습니다.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">weakMap1</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">new</span><span style="font-size: 10pt;"> </span><span style="color: rgb(78, 201, 176); font-size: 10pt;">WeakMap</span><span style="font-size: 10pt;">();</span></div><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj3</span><span style="font-size: 10pt;"> = {};</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">weakMap1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">set</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj3</span><span style="font-size: 10pt;">, </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'123'</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(197, 134, 192); font-size: 10pt;">try</span><span style="font-size: 10pt;"> {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">weakMap1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">set</span><span style="font-size: 10pt;">(</span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'test'</span><span style="font-size: 10pt;">,</span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'1234'</span><span style="font-size: 10pt;">);</span></div><div><span style="font-size: 10pt;">} </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">catch</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">e</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">e</span><span style="font-size: 10pt;">);</span></div><div><span style="font-size: 10pt;">}</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">weakMap1</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">weakMap1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">get</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj3</span><span style="font-size: 10pt;">));</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj3</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">null</span><span style="font-size: 10pt;">; </span><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 참조를 덮어씀</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">weakMap1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">get</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj3</span><span style="font-size: 10pt;">)); </span><span style="color: rgb(106, 153, 85); font-size: 10pt;">// undefined</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// obj 를 나타내는 객체는 오로지 위크맵의 키로만 사용되고 있으므로, 참조를 덮어쓰게 되면 이 객체는 위크맵과 메모리에서 자동으로 삭제됩니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 맵과 위크맵의 두 번째 차이는 위크맵은 반복 작업과 keys(), values(), entries() 메서드를 지원하지 않는다는 점입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 따라서 위크맵에선 키나 값 전체를 얻는 게 불가능합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵에 제공되는 메서드 확인 가능</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'Object.getPrototypeOf(new WeakMap())'</span><span style="font-size: 10pt;">, </span><span style="color: rgb(78, 201, 176); font-size: 10pt;">Object</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">getPrototypeOf</span><span style="font-size: 10pt;">(</span><span style="color: rgb(86, 156, 214); font-size: 10pt;">new</span><span style="font-size: 10pt;"> </span><span style="color: rgb(78, 201, 176); font-size: 10pt;">WeakMap</span><span style="font-size: 10pt;">()));</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵이 지원하는 메서드는 단출합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// weakMap.get(key)</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// weakMap.set(key, value)</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// weakMap.delete(key)</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// weakMap.has(key)</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 왜 이렇게 적은 메서드만 제공할까요?</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 원인은 가비지 컬렉션의 동작 방식 때문입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위 예시의 obj 를 나타내는 객체처럼, 객체는 모든 참조를 잃게 되면 자동으로 가비지 컬렉션의 대상이 됩니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 그런데 가비지 컬렉션의 동작 시점은 정확히 알 수 없습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 가비지 컬렉션이 일어나는 시점은 자바스크립트 엔진이 결정합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 객체는 모든 참조를 잃었을 때, 그 즉시 메모리에서 삭제될 수도 있고, 다른 삭제 작업이 있 을 떄까지 대기하다가 함께 삭제될 수도 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 현재 위크맵에 요소가 몆 개 있는지 정확히 파악하는 것 자체가 불가능한 것이죠.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 가비지 컬렉터가 한 번에 메모리를 청소할 수도 있고, 부분 부분 메모리를 청소할 수도 있으므로 위크맵의 요소 전체를 대상으로 무언가를 하는 메서드는 동작 자체가 불가능합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 그럼 위크맵을 어떤 경우에 사용할 수 있을까요?</span></div><br><br><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 유스 케이스: 추가 데이터</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵은 부차적인 데이터를 저장할 곳이 필요할 때 그 진가를 발휘합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 서드파티 라이브러리와 같은 외부 코드에 '속한' 객체를 가지고 작업을 해야 한다고 가정해 봅시다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이 객체에 데이터를 추가해줘야 하는데, 추가해 줄 데이터는 객체가 살아있는 동안에만 유효한 상황입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이럴 때 위크맵을 사용할 수 있습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵에 원하는 데이터를 저장하고, 이때 키는 객체를 사용하면 됩니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이렇게 하면 객체가 가비지 컬렉션의 대상이 될 때, 데이터도 함께 사라지게 됩니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// weakMap.set(john, '비밀문서');</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// john 이 사망하면, 비밀문서는 자동으로 파기됩니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 좀 더 구체적인 예시를 들어보겠습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 아래에 사용자의 방문 횟수를 세어 주는 코드가 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 관련 정보는 맵에 저장하고 있는데 맵 요소의 키엔 특정 사용자를 나타내는 객체를, 값엔 해당 사용자의 방문 횟수를 저장하고 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 어떤 사용자의 정보를 저장할 필요가 없어지면(가비지 컬렉션의 대상이 되면) 해당 사용자의 방문 횟수도 저장할 필요가 없어질 겁니다.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitscountMap1</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">new</span><span style="font-size: 10pt;"> </span><span style="color: rgb(78, 201, 176); font-size: 10pt;">Map</span><span style="font-size: 10pt;">();</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">function</span><span style="font-size: 10pt;"> </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">countUser1</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">count</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitscountMap1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">get</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user</span><span style="font-size: 10pt;">) || </span><span style="color: rgb(181, 206, 168); font-size: 10pt;">0</span><span style="font-size: 10pt;">;</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitscountMap1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">set</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user</span><span style="font-size: 10pt;">, </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">count</span><span style="font-size: 10pt;"> + </span><span style="color: rgb(181, 206, 168); font-size: 10pt;">1</span><span style="font-size: 10pt;">);</span></div><div><span style="font-size: 10pt;">}</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user1</span><span style="font-size: 10pt;"> = {</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">name</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'inhui'</span><span style="font-size: 10pt;">};</span></div><br><div><span style="color: rgb(220, 220, 170); font-size: 10pt;">countUser1</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user1</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(220, 220, 170); font-size: 10pt;">countUser1</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user1</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(220, 220, 170); font-size: 10pt;">countUser1</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user1</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitscountMap1</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">user1</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">null</span><span style="font-size: 10pt;">;</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitscountMap1</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이제 user1 을 나타내는 객체는 가비지 컬렉션의 대상이 되어야 하는데 visitscountMap 의 키로 사용되고 있어서 메모리에서 삭제되지 않습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 특정 사용자를 나타내는 객체가 메모리에서 사라지면 해당 객체에 대한 정보도 우리가 손수 지워줘야 하는 상황입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이렇게 하지 않으면 visitscountMap 가 차지하는 메모리 공간이 한없이 커질 겁니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 애플리케이션 구조가 복잡할 땐, 이렇게 쓸모 없는 데이터를 수동으로 비워주는 게 꽤 골치 아픕니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이런 문제는 위크맵을 사용해 예방할 수 있습니다.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitscountMap2</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">new</span><span style="font-size: 10pt;"> </span><span style="color: rgb(78, 201, 176); font-size: 10pt;">WeakMap</span><span style="font-size: 10pt;">();</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user2</span><span style="font-size: 10pt;"> = {</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">name</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'john'</span><span style="font-size: 10pt;">};</span></div><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user3</span><span style="font-size: 10pt;"> = {</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">name</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'efmk'</span><span style="font-size: 10pt;">};</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">function</span><span style="font-size: 10pt;"> </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">countUser2</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">count</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitscountMap2</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">get</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user</span><span style="font-size: 10pt;">) || </span><span style="color: rgb(181, 206, 168); font-size: 10pt;">0</span><span style="font-size: 10pt;">;</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitscountMap2</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">set</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user</span><span style="font-size: 10pt;">, </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">count</span><span style="font-size: 10pt;"> + </span><span style="color: rgb(181, 206, 168); font-size: 10pt;">1</span><span style="font-size: 10pt;">);</span></div><div><span style="font-size: 10pt;">}</span></div><br><div><span style="color: rgb(220, 220, 170); font-size: 10pt;">countUser2</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user2</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(220, 220, 170); font-size: 10pt;">countUser2</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user2</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(220, 220, 170); font-size: 10pt;">countUser2</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user2</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(220, 220, 170); font-size: 10pt;">countUser2</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user3</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(220, 220, 170); font-size: 10pt;">countUser2</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">user3</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">user2</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">null</span><span style="font-size: 10pt;">;</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitscountMap2</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵을 사용해 사용자 방문 횟수를 저장하면 visitscountMap 을 수동으로 청소해줄 필요가 없습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// obj 를 나타내는 객체가 도달 가능하지 않은 상태가 되면 자동으로 메모리에서 삭제되기 때문입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵의 키에 대응하는 값도 자동으로 가비지 컬렉션의 대상이 됩니다.</span></div><br><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 유스 케이스: 캐싱</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵은 캐싱(caching) 이 필요할 때 유용합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 캐싱은 시간이 오래 걸리는 작업의 결과를 저장해서 연산 시간과 비용을 절약해주는 기법입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 동일한 함수를 여러 번 호출해야 할 떄, 최초 호출 시 반환되ㅏㄴ 값을 어딘가에 저장해 놓았다가 그 다음엔 함수를 호출하는 대신 저장된 값을 사용하는 게 캐싱의 실례입니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 아래 예시는 함수 연산 결과를 맵에 저장하고 있습니다.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">cache1</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">new</span><span style="font-size: 10pt;"> </span><span style="color: rgb(78, 201, 176); font-size: 10pt;">Map</span><span style="font-size: 10pt;">();</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">function</span><span style="font-size: 10pt;"> </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">process</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">if</span><span style="font-size: 10pt;">(!</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">cache1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">has</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj</span><span style="font-size: 10pt;">)) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">obj</span><span style="font-size: 10pt;">();</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">cache1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">set</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj</span><span style="font-size: 10pt;">, </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result</span><span style="font-size: 10pt;">);</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; }</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">return</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">cache1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">get</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj</span><span style="font-size: 10pt;">)</span></div><div><span style="font-size: 10pt;">}</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">obj4</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">function</span><span style="font-size: 10pt;">() {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">return</span><span style="font-size: 10pt;"> </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'testtest'</span><span style="font-size: 10pt;">;</span></div><div><span style="font-size: 10pt;">};</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result1</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">process</span><span style="font-size: 10pt;">(</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">obj4</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result1</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result2</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">process</span><span style="font-size: 10pt;">(</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">obj4</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result2</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(220, 220, 170); font-size: 10pt;">obj4</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">null</span><span style="font-size: 10pt;">;</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">cache1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">size</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// process(obj) 를 여러 번 호출하면 최초 호출할 때만 연산이 수행되고, 그 이후엔 연산 결과를 cache 에서 가져옵니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 그런데 맵을 사용하고 있어서 객체가 필요 없어져도 cache 를 수동으로 청소해 줘야 합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 맵을 위크맵으로 교체하면 이런 문제를 예방할 수 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 객체가 메모리에서 삭제되면, 캐시에 저장된 결과 역시 메모리에서 자동으로 삭제되기 때문입니다.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">cache2</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">new</span><span style="font-size: 10pt;"> </span><span style="color: rgb(78, 201, 176); font-size: 10pt;">WeakMap</span><span style="font-size: 10pt;">();</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">function</span><span style="font-size: 10pt;"> </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">process2</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">if</span><span style="font-size: 10pt;">(!</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">cache2</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">has</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj</span><span style="font-size: 10pt;">)) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">obj</span><span style="font-size: 10pt;">();</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">cache2</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">set</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj</span><span style="font-size: 10pt;">, </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result</span><span style="font-size: 10pt;">);</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; }</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">return</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">cache2</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">get</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj</span><span style="font-size: 10pt;">)</span></div><div><span style="font-size: 10pt;">}</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">obj5</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">function</span><span style="font-size: 10pt;">() {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">return</span><span style="font-size: 10pt;"> </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'testtest'</span><span style="font-size: 10pt;">;</span></div><div><span style="font-size: 10pt;">};</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result3</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">process2</span><span style="font-size: 10pt;">(</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">obj5</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result3</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result4</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">process2</span><span style="font-size: 10pt;">(</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">obj5</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result4</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(220, 220, 170); font-size: 10pt;">obj5</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">null</span><span style="font-size: 10pt;">;</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">cache2</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">cache2</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">size</span><span style="font-size: 10pt;">); </span><span style="color: rgb(106, 153, 85); font-size: 10pt;">// WeakMap 에서는 size 를 사용할 수 없습니다.</span></div><br><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크셋</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이제 위크셋(WeakSet) 에 대해 알아봅시다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크셋은 셋과 유사한데, 객체만 저장할 수 있다는 점이 다릅니다. 원시값은 저장할 수 없습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 셋 안의 객체는 도달 가능할 때만 메모리에 유지됩니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 셋과 마찬가지로 위크셋이 지원하는 메서드는 단출합니다. add, has, delete 를 사용할 수 있고 size, keys() 나 반복 작업 관련 메서드는 사용할 수 없습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵과 유사하게 위크셋도 부차적인 데이터를 저장할 때 사용할 수 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 다만, 위크셋엔 위크맵처럼 복잡한 데이터를 저장하지 않습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 대신 "예" , "아니오" 같은 간단한 답변을 얻는 용도로 사용됩니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 물론 위크셋에 저장되는 값들은 객체이겠죠.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 예시와 함께 위크셋의 용도를 알아봅시다. 아래 코드에선 사용자의 사이트 방문 여부를 추적하는 용도로 위크셋을 사용하고 있습니다.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitedSet</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">new</span><span style="font-size: 10pt;"> </span><span style="color: rgb(78, 201, 176); font-size: 10pt;">WeakSet</span><span style="font-size: 10pt;">();</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj6</span><span style="font-size: 10pt;"> = {</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">name</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'John'</span><span style="font-size: 10pt;">};</span></div><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj7</span><span style="font-size: 10pt;"> = {</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">name</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'Inhui'</span><span style="font-size: 10pt;">};</span></div><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj8</span><span style="font-size: 10pt;"> = {</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">name</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'Son'</span><span style="font-size: 10pt;">};</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitedSet</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">add</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj6</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitedSet</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">add</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj7</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitedSet</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">add</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj6</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 객체의 방문 여부를 확인</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'visitedSet.has(obj6)'</span><span style="font-size: 10pt;">, </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitedSet</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">has</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj6</span><span style="font-size: 10pt;">));</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'visitedSet.has(obj8)'</span><span style="font-size: 10pt;">, </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitedSet</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">has</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj8</span><span style="font-size: 10pt;">));</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj6</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">null</span><span style="font-size: 10pt;">;</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'visitedSet.has(obj6)'</span><span style="font-size: 10pt;">, </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">visitedSet</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">has</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj6</span><span style="font-size: 10pt;">));</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵과 위크셋의 가장 큰 단점은 반복 작업이 불가능하다는 점입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵이나 위크셋에 저장된 자료를 한번에 얻는 게 불가능하죠.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이런 단점은 불편함을 초래하는 것 같아 보이지만, 위크맵과 위크셋을 이용해 할 수 있는 주요 작업을 방해하진 않습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵과 위크셋은 객체와 함께 추가 데이터를 저장하는 용도로 쓸 수 있습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 요약</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵은 맵과 유사한 컬렉션입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크맵을 구성하는 요소의 키는 오직 객체만 가능합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 키로 사용된 객체가 메모리에서 삭제되면 이에 대응하는 값 역시 삭제됩니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크셋은 셋과 유사한 컬렉션입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크셋엔 객체만 저장할 수 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 위크셋에 저장된 객체가 도달 불가능한 상태가 되면 해당 객체는 메모리에서 삭제됩니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 두 자료구조 모두 구성 요소 전체를 대상으로 하는 메서드를 지원하지 않습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 구성 요소 하나를 대상으로 하는 메서드만 지원합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 객체엔 '주요' 자료를, 위크맵 과 위크셋엔 '부수적인' 자료를 저장하는 형태로 위크맵과 위크셋을 활용할 수 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 객체가 메모리에서 삭제되면(그리고 오로지 위크맵과 위크셋의 키만 해당 객체를 참조하고 있다면) 위크맵이나 위크셋에 저장된 연관 자료들 역시 메모리에서 자동으로 삭제됩니다.</span></div></div>