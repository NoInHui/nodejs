<div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// iterable 객체</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 반복 가능한(iterable, 이터러블) 객체는 배열을 일반화한 객체입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터러블 이라는 개념을 사용하면 어떤 객체에든 for..of 반복문을 적용할 수 있습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 배열은 대표적인 이터러블입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 배열 외에도 다수의 내장 객체가 반복 가능합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 문자열 역시 이터러블의 예입니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 배열이 아닌 객체가 있는데, 이 객체가 어떤 것들의 컬렉션을 나타내고 있는 경우, for..of 문법을 적용할 수만 있다면 컬렉션을 순회하는데 유용할 겁니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이게 가능하도록 해봅시다.</span></div><br><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// Symbol.iterator</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 직접 이터러블 객체를 만들어 이터러블이라는 개념을 이해해 보도록 합시다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// for..of 를 적용하기에 적합해 보이는 배열이 아닌 객체를 만들겠습니다.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj1</span><span style="font-size: 10pt;"> = {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">from</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(181, 206, 168); font-size: 10pt;">1</span><span style="font-size: 10pt;">,</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">to</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(181, 206, 168); font-size: 10pt;">5</span></div><div><span style="font-size: 10pt;">};</span></div><br><div><span style="color: rgb(197, 134, 192); font-size: 10pt;">try</span><span style="font-size: 10pt;"> {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">for</span><span style="font-size: 10pt;">(</span><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">val</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">of</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj1</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">val</span><span style="font-size: 10pt;">);</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; }</span></div><div><span style="font-size: 10pt;">} </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">catch</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">e</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">e</span><span style="font-size: 10pt;">);</span></div><div><span style="font-size: 10pt;">}</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// obj 를 이터러블로 만들려면 객체에 Symbol.iterator 라는 메서드를 &nbsp;추가해 아래와 같은 일이 벌어지도록 해야 합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 1. for..of 가 시작되자마자 for..of 는 Symbol.iterator 를 호출합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// Symbol.iterator 는 반드시 이터레이터(iterator, 메서드 next 가 있는 객체) 를 반환해야 합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 2. 이후 for..of 는 반환된 객체(이터레이터)만을 대상으로 동작합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 3. for..of 에 다음 값이 필요하면 for..of 는 이터레이터의 next() 메서드를 호출합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 4. next() 의 반환 값은 {done: boolean, value: any} 와 같은 형태이어야 합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// done=true 는 반복이 종료되었음을 의미합니다. done=false 일땐 value 에 다음 값이 저장됩니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 1. for..of 최초 호출 시, Symbol,interator 가 호출됩니다.</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj1</span><span style="font-size: 10pt;">[</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">Symbol</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">iterator</span><span style="font-size: 10pt;">] = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">function</span><span style="font-size: 10pt;">() {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(106, 153, 85); font-size: 10pt;">// Symbol.iterator 는 이터레이터 객체를 반환합니다.</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 2. 이후 for..of 는 반환된 이터레이터 객체만을 대상으로 동작하는데, 이때 다음 값도 정해집니다.</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">return</span><span style="font-size: 10pt;"> {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">current</span><span style="color: rgb(156, 220, 254); font-size: 10pt;"> :</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">this</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">from</span><span style="font-size: 10pt;">,</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">last</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">this</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">to</span><span style="font-size: 10pt;">,</span></div><br><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 3. for..of 반복문에 의해 반복마다 next() 가 호출됩니다.</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">next</span><span style="font-size: 10pt;">() {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">if</span><span style="font-size: 10pt;">(</span><span style="color: rgb(86, 156, 214); font-size: 10pt;">this</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">current</span><span style="font-size: 10pt;"> &lt;= </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">this</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">last</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 4. next() 는 값을 객체 {done:.. , value:..} 형태로 반환해야 합니다.</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">return</span><span style="font-size: 10pt;"> {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">done</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">false</span><span style="font-size: 10pt;">,</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">value</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">this</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">current</span><span style="font-size: 10pt;">++</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">else</span><span style="font-size: 10pt;"> {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">return</span><span style="font-size: 10pt;"> {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">done</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">true</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; }</span></div><div><span style="font-size: 10pt;">}</span></div><br><div><span style="color: rgb(197, 134, 192); font-size: 10pt;">for</span><span style="font-size: 10pt;">(</span><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">val</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">of</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj1</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'obj1'</span><span style="font-size: 10pt;">, </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">val</span><span style="font-size: 10pt;">);</span></div><div><span style="font-size: 10pt;">}</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터러블 객체의 핵심은 '관심사의 분리(Separation of concern, SoC)' 에 있습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// obj 엔 메서드 next() 가 없습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 대신 obj[Symbol.iterator]() 를 호출해서 만든 이터레이터 객체와 이 객체의 메서드 next() 에서 반복에 사용될 값을 만들어냅니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이렇게 하면 이터레이터 객체와 반복 대상인 객체를 분리할 수 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터레이터 객체와 반복 대상 객체를 합쳐서 obj 자체를 이터레이터로 만들면 코드가 더 간단해집니다.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj2</span><span style="font-size: 10pt;"> = {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">from</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(181, 206, 168); font-size: 10pt;">1</span><span style="font-size: 10pt;">,</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">to</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(181, 206, 168); font-size: 10pt;">5</span><span style="font-size: 10pt;">,</span></div><br><div><span style="font-size: 10pt;">&nbsp; &nbsp; [</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">Symbol</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">iterator</span><span style="font-size: 10pt;">]() {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">this</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">current</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">this</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">from</span><span style="font-size: 10pt;">;</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">return</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">this</span><span style="font-size: 10pt;">;</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; },</span></div><br><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(220, 220, 170); font-size: 10pt;">next</span><span style="font-size: 10pt;">() {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">if</span><span style="font-size: 10pt;">(</span><span style="color: rgb(86, 156, 214); font-size: 10pt;">this</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">current</span><span style="font-size: 10pt;"> &lt;= </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">this</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">to</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">return</span><span style="font-size: 10pt;"> {</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">done</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">false</span><span style="font-size: 10pt;">, </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">value</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">this</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">current</span><span style="font-size: 10pt;">++}</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; } </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">else</span><span style="font-size: 10pt;"> {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">return</span><span style="font-size: 10pt;"> {</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">done</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">true</span><span style="font-size: 10pt;">}</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; }</span></div><div><span style="font-size: 10pt;">}</span></div><br><div><span style="color: rgb(197, 134, 192); font-size: 10pt;">for</span><span style="font-size: 10pt;">(</span><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">val</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">of</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj2</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'obj2'</span><span style="font-size: 10pt;">, </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">val</span><span style="font-size: 10pt;">);</span></div><div><span style="font-size: 10pt;">}</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이제 obj[Symbol.iterator]() 가 객체 obj 자체를 반환합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 반환된 객체엔 필수 메서드인 next() 가 있고 this.current 에 반복이 얼마나 진행되었는지를 나타내는 값도 저장되어 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 코드는 더 짧아졌고요.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이렇게 작성하는 게 좋을 떄가 종종 있습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 단점은 두 개의 for..of 반복문을 하나의 객체에 동시에 사용할 수 없다는 점입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터레이터가 하나뿐이어서 두 반복문이 반복 상태를 공유하기 때문이죠.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 그런데 동시에 두 개의 for..of 를 사용하는 것은 비동기 처리에서도 흔한 케이스는 아닙니다.</span></div><br><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 무한개의 이터레이터</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 무수히 많은 이터레이터도 가능합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// obj 에서 obj.to 에 Infinity 를 할당하면 obj 가 무한대가 되죠.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 무수히 많은 의사 난수를 생성하는 이터러블 객체를 만드는 것도 가능합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이 방법이 유용하게 쓰이는 경우도 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// next 엔 제약사항이 없습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// next 가 값을 계속 반환하는 것은 정상적인 동작입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 물론 위와 같은 이터러블에 for..of 반복문을 사용하면 끝이 없을 겁니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 그렇다 하더라도 break 를 사용하면 언제든지 반복을 멈출 수 있습니다.</span></div><br><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 문자열은 이터러블입니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 배열과 문자열은 가장 광범위하게 쓰이는 내장 이터러블 입니다.</span></div><div><span style="color: rgb(197, 134, 192); font-size: 10pt;">for</span><span style="font-size: 10pt;">(</span><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">char</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">of</span><span style="font-size: 10pt;"> </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'test'</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">char</span><span style="font-size: 10pt;">);</span></div><div><span style="font-size: 10pt;">}</span></div><br><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터레이터를 명시적으로 호출하기</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터레이터를 어떻게 명시적으로 사용할 수 있는지 살펴보면서 좀 더 깊게 이해해봅시다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// for..of 를 사용했을 때와 동일한 방법으로 문자열을 순회할 건데, 이번엔 직접 호출을 통해서 순회해보겠습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 다음 코드는 문자열 이터레이터를 만들고, 여기서 값을 수동으로 가져옵니다.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">str1</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'Hello'</span><span style="font-size: 10pt;">;</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">iterator1</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">str1</span><span style="font-size: 10pt;">[</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">Symbol</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">iterator</span><span style="font-size: 10pt;">]();</span></div><br><div><span style="color: rgb(197, 134, 192); font-size: 10pt;">while</span><span style="font-size: 10pt;">(</span><span style="color: rgb(86, 156, 214); font-size: 10pt;">true</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">iterator1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">next</span><span style="font-size: 10pt;">();</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">if</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">done</span><span style="font-size: 10pt;">) </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">break</span><span style="font-size: 10pt;">;</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">result</span><span style="font-size: 10pt;">.</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">value</span><span style="font-size: 10pt;">);</span></div><div><span style="font-size: 10pt;">}</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터레이터를 명시적으로 호출하는 경우는 거의 없는데, 이 방법을 사용하면 for..of 를 사용하는 것보다 반복 과정을 더 잘 통제할 수 있다는 장점이 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 반복을 시작했다가 잠시 멈춰 다른 작업을 하다가 다시 반복을 시작하는 것과 같이 반복 과정을 여러 개로 쪼개는 것이 가능합니다.</span></div><br><br><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터러블과 유사 배열</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 비슷해 보이지만 아주 다른 용어 두 가지가 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 헷갈리지 않으려면 두 용어를 잘 이해하고 있어야 합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터러블(iterable) 은 위에서 설명한 바와 같이 메서드 Symbol.iterator 가 구현된 객체입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 유사 배열(array-like) 은 인덱스와 length 프로퍼티가 있어서 배열처럼 보이는 객체 입니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 브라우저 등의 호스트 환경에서 자바스크립트를 사용해 문제를 해결할 때 이터러블 객체나 유사 배열 객체 혹은 둘다인 객체를 만날 수 있습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터러블 객체이면서 유사배열 객체인 문자열이 대표적인 예입니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터러블 객체라고 해서 유사 배열 객체는 아닙니다. 유사 배열 객체라고 해서 이터러블 객체인 것도 아닙니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 아래 예시의 객체는 유사 배열 객체이긴 하지만 이터러블 객체가 아닙니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// index, length 프로퍼티가 있음 =&gt; 유사 배열</span></div><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj3</span><span style="font-size: 10pt;"> = {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(181, 206, 168); font-size: 10pt;">0</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'Hello'</span><span style="font-size: 10pt;">,</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(181, 206, 168); font-size: 10pt;">1</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'World'</span><span style="font-size: 10pt;">,</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">length</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="font-size: 10pt;"> </span><span style="color: rgb(181, 206, 168); font-size: 10pt;">2</span></div><div><span style="font-size: 10pt;">};</span></div><br><div><span style="color: rgb(197, 134, 192); font-size: 10pt;">try</span><span style="font-size: 10pt;"> {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(106, 153, 85); font-size: 10pt;">// Symbol.iterator 가 없으므로 에러 발생</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">for</span><span style="font-size: 10pt;">(</span><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">val</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">of</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj3</span><span style="font-size: 10pt;">) {}</span></div><div><span style="font-size: 10pt;">} </span><span style="color: rgb(197, 134, 192); font-size: 10pt;">catch</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">e</span><span style="font-size: 10pt;">) {</span></div><div><span style="font-size: 10pt;">&nbsp; &nbsp; </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">e</span><span style="font-size: 10pt;">);</span></div><div><span style="font-size: 10pt;">}</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터러블과 유사 배열은 대개 배열이 아니기 때문에 push, pop 등의 메서드를 지원하지 않습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터러블과 유사 배열을 배열처럼 다루고 싶을 때 이런 특징은 불편함을 초래합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// obj 에 배열 메서드를 사용해 무언가를 하고 싶을 떄 처럼 말이죠.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// Array.from</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 범용 메서드 Array.from 은 이터러블이나 유사 배열을 받아 진짜 Array 를 만들어줍니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이 과정을 거치면 이터러블이나 유사 배열에 배열 메서드를 사용할 수 있습니다.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">arr1</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(78, 201, 176); font-size: 10pt;">Array</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">from</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj3</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">arr1</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">unshift</span><span style="font-size: 10pt;">(</span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'3'</span><span style="font-size: 10pt;">,</span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'4'</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">arr1</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// Array.from 은 객체를 받아 이터러블이나 유사 배열인지 조사합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 넘겨 받은 인수가 이터러블이나 유사 배열인 경우, 새로운 배열을 만들고 객체의 모든 요소를 새롭게 만들 배열로 복사합니다.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">arr2</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(78, 201, 176); font-size: 10pt;">Array</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">from</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj2</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">arr2</span><span style="font-size: 10pt;">);</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// Array.from 엔 매핑(mapping) 함수를 선택적으로 넘겨줄 수 있습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// Array.from(obj [, mapFn, thisArg])</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// mapFn 을 두 번째 인수로 넘겨주면 새로운 배열에 obj 의 요소를 추가하기 전에 각 요소를 대상으로 mapFn 을 적용할 수 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 새로운 배열엔 mapFn 을 적용하고 반환된 값이 추가됩니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 세 번째 인수 thisArg 는 각 요소의 this 를 지정할 수 있도록 해줍니다.</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">arr3</span><span style="font-size: 10pt;"> = </span><span style="color: rgb(78, 201, 176); font-size: 10pt;">Array</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">from</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj2</span><span style="font-size: 10pt;">, </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">num</span><span style="font-size: 10pt;"> </span><span style="color: rgb(86, 156, 214); font-size: 10pt;">=&gt;</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">num</span><span style="font-size: 10pt;"> * </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">num</span><span style="font-size: 10pt;">);</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">arr3</span><span style="font-size: 10pt;">);</span></div><br><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 요약</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// for..of 를 사용할 수 있는 객체를 이터러블 이라고 부릅니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터러블엔 메서드 Symbol.iterator 가 반드시 구현되어 있어야 합니다.</span></div><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">arr4</span><span style="font-size: 10pt;"> = [</span><span style="color: rgb(181, 206, 168); font-size: 10pt;">1</span><span style="font-size: 10pt;">,</span><span style="color: rgb(181, 206, 168); font-size: 10pt;">2</span><span style="font-size: 10pt;">,</span><span style="color: rgb(181, 206, 168); font-size: 10pt;">3</span><span style="font-size: 10pt;">];</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(78, 201, 176); font-size: 10pt;">Object</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">getPrototypeOf</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">arr4</span><span style="font-size: 10pt;">));</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// Array 에는 Symbol.iterator 가 구현되어 있음</span></div><br><div><span style="color: rgb(86, 156, 214); font-size: 10pt;">let</span><span style="font-size: 10pt;"> </span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj4</span><span style="font-size: 10pt;"> = {</span><span style="color: rgb(181, 206, 168); font-size: 10pt;">1</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="color: rgb(181, 206, 168); font-size: 10pt;">1</span><span style="font-size: 10pt;">,</span><span style="color: rgb(181, 206, 168); font-size: 10pt;">2</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">:</span><span style="color: rgb(181, 206, 168); font-size: 10pt;">2</span><span style="font-size: 10pt;">};</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="font-size: 10pt;">(</span><span style="color: rgb(78, 201, 176); font-size: 10pt;">Object</span><span style="font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">getPrototypeOf</span><span style="font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">obj4</span><span style="font-size: 10pt;">));</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// Object 에는 Symbol.iterator 가 구현되어 있지않음</span></div><br><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// obj[Symbol.iterator] 의 결과는 이터레이터라고 부릅니다. 이터레이터는 이어지는 반복 과정을 처리합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이터레이터엔 객체 {done:boolean, value:any} 을 반환하는 메서드 next() 가 반드시 구현되어 있어야 합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 여기서 done:true 는 반복이 끝났음을 의미하고 그렇지 않은 경우엔 value 가 다음 값이 됩니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 메서드 Symbol.iterator 는 for..of 에 의해 자동으로 호출되는데, 개발자가 명시적으로 호출하는 것도 가능합니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 문자열이나 배열 같은 내장 이터러블에도 Symbol.iterator 가 구현되어 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 문자열 이터레이터는 서로게이트 쌍을 지원합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 인덱스와 length 프로퍼티가 있는 객체는 유사 배열이라 불립니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 유사 배열 객체엔 다양한 프로퍼티와 메서드가 있을 수 있는데 배열 내장 메서드는 없습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 명세서를 보면 대부분의 메서드는 진짜 배열이 아닌 이터러블이나 유사 배열을 대상으로 동작한다고 쓰여 있는걸 볼 수 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이 방법이 더 추상적이기 때문입니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// Array.from(obj [, mapFn, thisArg]) 을 사용하면 이터러블이나 유사 배열인 obj 를 진짜 Array 로 만들 수 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이렇게 하면 obj 에도 배열 메서드를 사용할 수 있죠.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 선택 인수 mapFn 와 thisArg 는 각 요소에 함수를 적용할 수 있게 해줍니다.</span></div></div>