<div style="color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// localStorage 와 sessionStorage</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 웹 스토리 객체(web storage object) 인 localStorage 와 sessionStorage 는 브라우저 내 키-값 쌍을 저장할 수 있게 해줍니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이 둘을 사용하면 페이지를 새로 고침하고(sessionStorage 의 경우) 심지어 브라우저를 다시 실행해도 (localStorage 의 경우) 데이터가 사라지지 않고 남아있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 그런데 "쿠키를 사용하면 브라우저에 데이터를 저장할 수 있는데, 왜 또 다른 객체를 사용해 데이터를 저장하는 걸까요?" 라는 의문이 들 수 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 쿠키 이외에도 다른 방식을 사용하는 이유는 다음과 같습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 1. 쿠키와 다르게 웹 스토리지 객체는 네트워크 요청 시 서버로 전송되지 않습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 이런 특징 때문에 쿠키보다 더 많은 자료를 보관할 수 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 대부분의 브라우저가 최소 2MB 혹은 그 이상의 웹 스토리기 객체를 저장할 수 있도록 해줍니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 또한 개발자는 브라우저 내 웹 스토리지 구성 방식을 설정할 수 있습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 2. 쿠키와 또 다른 점은 서버가 HTTP 헤더를 통해 스토리지 객체를 조작할 수 없다는 것입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 웹 스토리지 객체 조작은 모두 자바스크립3트 내에서 수행됩니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 3. 웹 스토리지 객체는 도메인,프로토콜,포트로 정의되는 오리진(origin) 에 묶여있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 따라서 프로토콜과 서브도메인이 다르면 데이터에 접근할 수 없습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 두 스토리지 객체는 동일한 메서드와 프로퍼티를 제공합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// setItem(key,value)</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// getItem(key)</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// removeItem(key)</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// clear()</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// key(index)</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// length</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 두 스토리지 객체는 Map 과 유사합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// localStorage 데모</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// localStorage 의 주요 기능은 다음과 같습니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 오리진이 같은 경우 데이터는 모든 탭과 창에서 공유됩니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 브라우저나 OS 가 재시작하더라도 데이터가 파기되지 않습니다.</span></div><br><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">localStorage</span><span style="color: rgb(212, 212, 212); font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">setItem</span><span style="color: rgb(212, 212, 212); font-size: 10pt;">(</span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'test'</span><span style="color: rgb(212, 212, 212); font-size: 10pt;">,</span><span style="color: rgb(181, 206, 168); font-size: 10pt;">1</span><span style="color: rgb(212, 212, 212); font-size: 10pt;">);</span></div><div><span style="color: rgb(156, 220, 254); font-size: 10pt;">console</span><span style="color: rgb(212, 212, 212); font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">log</span><span style="color: rgb(212, 212, 212); font-size: 10pt;">(</span><span style="color: rgb(156, 220, 254); font-size: 10pt;">localStorage</span><span style="color: rgb(212, 212, 212); font-size: 10pt;">.</span><span style="color: rgb(220, 220, 170); font-size: 10pt;">getItem</span><span style="color: rgb(212, 212, 212); font-size: 10pt;">(</span><span style="color: rgb(206, 145, 120); font-size: 10pt;">'test'</span><span style="color: rgb(212, 212, 212); font-size: 10pt;">));</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 오리진(domain/port/protocol) 만 같다면 url 경로는 달라도 동일한 결과를 볼 수 있습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// localStorage 는 동일한 오리진을 가진 모든 창에서 공유되기 때문입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 따라서 한 창에 데이터를 설정하면 다른 창에서 변동 사항을 볼 수 있습니다.</span></div><br><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// sessionStorage</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// sessionStorage 객체는 localStorage 에 비해 자주 사용되진 않습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 제공하는 프로퍼티와 메서드는 같지만 훨씬 제한적이기 때문입니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// sessionStorage 는 현재 떠 있는 탭 내에서만 유지됩니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 같은 페이지라도 다른 탭에 있으면 다른 곳에 저장되기 때문입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 그런데 하나의 탭에 여러 개의 iframe 이 있는 경우엔 동일한 오리진에서 왔다고 취급되기 때문에 sessionStorage 가 공유됩니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 페이지를 새로 고침할 때 sessionStorage 에 저장된 데이터는 사라지지 않습니다. 하지만 탭을 닫고 새로 열때는 사라집니다.</span></div><br><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// storage 이벤트</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// localStorage 나 sessionStorage 의 데이터가 갱신될 때, storage 이벤트가 실행됩니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// storage 이벤트는 다음과 같은 프로퍼티를 지원합니다.</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// key - 변경된 데이터의 키</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// oldValue - 이전 값</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// newVlalue - 새로운 값</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// url - 갱신이 일어난 문서의 url</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// storageArea - 갱신이 일어난 localStorage 나 sessionStorage 객체</span></div><br><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 여기서 중요한 점은 storage 이벤트가 이벤트를 발생시킨 스토리지를 제외하고 스토리지에서 접근 가능한 window 객체 전부에서 일어난다는 사실입니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 좀 더 구체적으로 설명을 이어나가 보겠습니다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 두 개의 창에 같은 사이트를 띄워놨다고 가정해봅시다.</span></div><div><span style="color: rgb(106, 153, 85); font-size: 10pt;">// 창은 다르지만 localStorage 는 서로 공유됩니다.</span></div></div>