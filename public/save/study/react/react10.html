<div style="color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color: #c586c0;">import</span> <span style="color: #9cdcfe;">React</span>, { <span style="color: #9cdcfe;">Component</span> } <span style="color: #c586c0;">from</span> <span style="color: #ce9178;">'react'</span>;</div><br><div><span style="color: #6a9955;">// State 끌어올리기</span></div><br><div><span style="color: #6a9955;">// 종종 동일한 데이터에 대한 변경사항을 여러 컴포넌트에 반영해야 할 필요가 있습니다.</span></div><div><span style="color: #6a9955;">// 이럴 때는 가장 가까운 공통 조상으로 state 를 끌어올리는 것이 좋습니다.</span></div><br><div><span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">ReactOfficial9</span> <span style="color: #569cd6;">extends</span> <span style="color: #4ec9b0;">Component</span> {</div><div>&nbsp; &nbsp; <span style="color: #dcdcaa;">render</span>() {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">return</span> (</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #4ec9b0;">Calculator</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #4ec9b0;">Calculator</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; );</div><div>&nbsp; &nbsp; }</div><div>}</div><br><div><span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">Calculator</span> <span style="color: #569cd6;">extends</span> <span style="color: #4ec9b0;">Component</span> {</div><div>&nbsp; &nbsp; <span style="color: #569cd6;">constructor</span>(<span style="color: #9cdcfe;">props</span>) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">super</span>(<span style="color: #9cdcfe;">props</span>);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">state</span> = {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">temperature</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">''</span>,</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #9cdcfe;">scale</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">'c'</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; };</div><br><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">handleCelsiusChange</span> = <span style="color: #569cd6;">this</span>.<span style="color: #dcdcaa;">handleCelsiusChange</span>.<span style="color: #dcdcaa;">bind</span>(<span style="color: #569cd6;">this</span>);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">handleFahrenheitChange</span> = <span style="color: #569cd6;">this</span>.<span style="color: #dcdcaa;">handleFahrenheitChange</span>.<span style="color: #dcdcaa;">bind</span>(<span style="color: #569cd6;">this</span>);</div><div>&nbsp; &nbsp; }</div><br><div>&nbsp; &nbsp; <span style="color: #dcdcaa;">handleCelsiusChange</span>(<span style="color: #9cdcfe;">temperature</span>) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">this</span>.<span style="color: #dcdcaa;">setState</span>({<span style="color: #9cdcfe;">scale</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">'c'</span>, <span style="color: #9cdcfe;">temperature</span>});</div><div>&nbsp; &nbsp; }</div><br><div>&nbsp; &nbsp; <span style="color: #dcdcaa;">handleFahrenheitChange</span>(<span style="color: #9cdcfe;">temperature</span>) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">this</span>.<span style="color: #dcdcaa;">setState</span>({<span style="color: #9cdcfe;">scale</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">'f'</span>, <span style="color: #9cdcfe;">temperature</span>});</div><div>&nbsp; &nbsp; }</div><br><div>&nbsp; &nbsp; <span style="color: #dcdcaa;">render</span>() {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">scale</span> = <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">state</span>.<span style="color: #9cdcfe;">scale</span>;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">temperature</span> = <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">state</span>.<span style="color: #9cdcfe;">temperature</span>;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">celsius</span> = <span style="color: #4fc1ff;">scale</span> == <span style="color: #ce9178;">'c'</span> ? <span style="color: #dcdcaa;">tryConvert</span>(<span style="color: #4fc1ff;">temperature</span>, <span style="color: #dcdcaa;">toCelsius</span>) : <span style="color: #4fc1ff;">temperature</span>;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">fahrenheit</span> = <span style="color: #4fc1ff;">scale</span> == <span style="color: #ce9178;">'f'</span> ? <span style="color: #dcdcaa;">tryConvert</span>(<span style="color: #4fc1ff;">temperature</span>, <span style="color: #dcdcaa;">toFahrenheit</span>) : <span style="color: #4fc1ff;">temperature</span>;</div><br><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">return</span> (</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #4ec9b0;">TemperatureInput</span> <span style="color: #9cdcfe;">scale</span>=<span style="color: #ce9178;">'c'</span> <span style="color: #9cdcfe;">temperature</span>=<span style="color: #569cd6;">{</span><span style="color: #4fc1ff;">celsius</span><span style="color: #569cd6;">}</span> <span style="color: #9cdcfe;">onTemperatureChange</span>=<span style="color: #569cd6;">{this</span>.<span style="color: #dcdcaa;">handleCelsiusChange</span><span style="color: #569cd6;">}</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #4ec9b0;">TemperatureInput</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #4ec9b0;">TemperatureInput</span> <span style="color: #9cdcfe;">scale</span>=<span style="color: #ce9178;">'f'</span> <span style="color: #9cdcfe;">temperature</span>=<span style="color: #569cd6;">{</span><span style="color: #4fc1ff;">fahrenheit</span><span style="color: #569cd6;">}</span> <span style="color: #9cdcfe;">onTemperatureChange</span>=<span style="color: #569cd6;">{this</span>.<span style="color: #dcdcaa;">handleFahrenheitChange</span><span style="color: #569cd6;">}</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #4ec9b0;">TemperatureInput</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #4ec9b0;">BoilingVerdict</span> <span style="color: #9cdcfe;">celsius</span>=<span style="color: #569cd6;">{</span><span style="color: #dcdcaa;">parseFloat</span>(<span style="color: #4fc1ff;">celsius</span>)<span style="color: #569cd6;">}</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #4ec9b0;">BoilingVerdict</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">div</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; );</div><div>&nbsp; &nbsp; }</div><div>}</div><br><div><span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">scaleNames</span> = {</div><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">c</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">'Celsius'</span>,</div><div>&nbsp; &nbsp; <span style="color: #9cdcfe;">f</span><span style="color: #9cdcfe;">:</span> <span style="color: #ce9178;">'Fahrenheit'</span></div><div>};</div><br><div><span style="color: #569cd6;">class</span> <span style="color: #4ec9b0;">TemperatureInput</span> <span style="color: #569cd6;">extends</span> <span style="color: #4ec9b0;">Component</span> {</div><div>&nbsp; &nbsp; <span style="color: #569cd6;">constructor</span>(<span style="color: #9cdcfe;">props</span>) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">super</span>(<span style="color: #9cdcfe;">props</span>);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">handleChange</span> = <span style="color: #569cd6;">this</span>.<span style="color: #dcdcaa;">handleChange</span>.<span style="color: #dcdcaa;">bind</span>(<span style="color: #569cd6;">this</span>);</div><div>&nbsp; &nbsp; }</div><br><div>&nbsp; &nbsp; <span style="color: #dcdcaa;">handleChange</span>(<span style="color: #9cdcfe;">e</span>) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">this</span>.<span style="color: #4fc1ff;">props</span>.<span style="color: #dcdcaa;">onTemperatureChange</span>(<span style="color: #9cdcfe;">e</span>.<span style="color: #9cdcfe;">target</span>.<span style="color: #9cdcfe;">value</span>);</div><div>&nbsp; &nbsp; }</div><br><div>&nbsp; &nbsp; <span style="color: #dcdcaa;">render</span>() {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">temperature</span> = <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">props</span>.<span style="color: #9cdcfe;">temperature</span>;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">scale</span> = <span style="color: #569cd6;">this</span>.<span style="color: #9cdcfe;">props</span>.<span style="color: #9cdcfe;">scale</span>;</div><br><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">return</span> (</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">fieldset</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">legend</span><span style="color: #808080;">&gt;</span>Enter temperature in <span style="color: #569cd6;">{</span><span style="color: #9cdcfe;">scaleNames</span>[<span style="color: #9cdcfe;">scale</span>]<span style="color: #569cd6;">}</span>:<span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">legend</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">input</span> <span style="color: #9cdcfe;">value</span>=<span style="color: #569cd6;">{</span><span style="color: #9cdcfe;">temperature</span><span style="color: #569cd6;">}</span> <span style="color: #9cdcfe;">onChange</span>=<span style="color: #569cd6;">{this</span>.<span style="color: #9cdcfe;">handleChange</span><span style="color: #569cd6;">}</span><span style="color: #808080;">&gt;&lt;/</span><span style="color: #569cd6;">input</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">fieldset</span><span style="color: #808080;">&gt;</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp; )</div><div>&nbsp; &nbsp; }</div><div>}</div><br><div><span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">tryConvert</span>(<span style="color: #9cdcfe;">temperature</span>, <span style="color: #9cdcfe;">convert</span>) {</div><div>&nbsp; &nbsp; <span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">input</span> = <span style="color: #dcdcaa;">parseFloat</span>(<span style="color: #9cdcfe;">temperature</span>);</div><div>&nbsp; &nbsp; <span style="color: #c586c0;">if</span>(<span style="color: #9cdcfe;">Number</span>.<span style="color: #dcdcaa;">isNaN</span>(<span style="color: #9cdcfe;">input</span>)) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">return</span> <span style="color: #ce9178;">''</span>;</div><div>&nbsp; &nbsp; }</div><div>&nbsp; &nbsp; <span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">output</span> = <span style="color: #dcdcaa;">convert</span>(<span style="color: #9cdcfe;">input</span>);</div><div>&nbsp; &nbsp; <span style="color: #569cd6;">const</span> <span style="color: #4fc1ff;">rounded</span> = <span style="color: #9cdcfe;">Math</span>.<span style="color: #dcdcaa;">round</span>(<span style="color: #9cdcfe;">output</span> * <span style="color: #b5cea8;">1000</span>) / <span style="color: #b5cea8;">1000</span>;</div><div>&nbsp; &nbsp; <span style="color: #c586c0;">return</span> <span style="color: #9cdcfe;">rounded</span>.<span style="color: #dcdcaa;">toString</span>();</div><div>}</div><br><div><span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">toCelsius</span>(<span style="color: #9cdcfe;">fahrenheit</span>) {</div><div>&nbsp; &nbsp; <span style="color: #c586c0;">return</span> (<span style="color: #9cdcfe;">fahrenheit</span>-<span style="color: #b5cea8;">32</span>) * <span style="color: #b5cea8;">5</span> / <span style="color: #b5cea8;">9</span>;</div><div>}</div><br><div><span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">toFahrenheit</span>(<span style="color: #9cdcfe;">celsius</span>) {</div><div>&nbsp; &nbsp; <span style="color: #c586c0;">return</span> (<span style="color: #9cdcfe;">celsius</span> * <span style="color: #b5cea8;">9</span> / <span style="color: #b5cea8;">5</span>) + <span style="color: #b5cea8;">32</span>;</div><div>}</div><br><div><span style="color: #569cd6;">function</span> <span style="color: #dcdcaa;">BoilingVerdict</span>(<span style="color: #9cdcfe;">props</span>) {</div><div>&nbsp; &nbsp; <span style="color: #c586c0;">if</span>(<span style="color: #9cdcfe;">props</span>.<span style="color: #9cdcfe;">celsius</span> &gt;= <span style="color: #b5cea8;">100</span>) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #c586c0;">return</span> <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">p</span><span style="color: #808080;">&gt;</span>The water would boil.<span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">p</span><span style="color: #808080;">&gt;</span>;</div><div>&nbsp; &nbsp; }</div><div>&nbsp; &nbsp; <span style="color: #c586c0;">return</span> <span style="color: #808080;">&lt;</span><span style="color: #569cd6;">p</span><span style="color: #808080;">&gt;</span>The water would not boil.<span style="color: #808080;">&lt;/</span><span style="color: #569cd6;">p</span><span style="color: #808080;">&gt;</span>;</div><div>}</div><br><div><span style="color: #6a9955;">// 교훈</span></div><br><div><span style="color: #6a9955;">// React 애플리케이션 안에서 변경이 일어나는 데이터에 대해서는 '진리의 원천' 을 하나만 두어야 합니다.</span></div><div><span style="color: #6a9955;">// 보통의 경우 state 는 렌더링에 그 값을 필요로 하는 컴포넌트에 먼저 추가됩니다.</span></div><div><span style="color: #6a9955;">// 그러고 나서 다른 컴포넌트도 역시 그 값이 필요하게 되면 그 값을 그들의 가장 가까운 공통 조상으로 끌어올리면 됩니다.</span></div><div><span style="color: #6a9955;">// 다른 컴포넌트 간에 존재하는 state 를 동기화시키려고 노력하는 대신 하향식 데이터 흐름에 기대는 걸 추천합니다.</span></div><br><div><span style="color: #6a9955;">// state 를 끌어올리는 작업은 양방향 바인딩 접근 방식보다 더 많은 보일러 플레이트 코드를 유발하지만, 버그를 찾고 격리하기 더 쉽게 만든다는 장점이 있습니다.</span></div><div><span style="color: #6a9955;">// 어떤 state 든 간에 특정 컴포넌트 안에서 존재하기 마련이고 그 컴포넌트가 자신의 state 를 스스로 변경할 수 있으므로 버그가 존재할 수 있는 범위가 크게 줄어듭니다.</span></div><div><span style="color: #6a9955;">// 또한 사용자의 입력을 거부하거나 변형하는 자체 로직을 구현할 수도 있습니다.</span></div><br><div><span style="color: #c586c0;">export</span> <span style="color: #c586c0;">default</span> <span style="color: #9cdcfe;">ReactOfficial9</span>;</div></div>