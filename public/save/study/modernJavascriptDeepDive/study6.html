<div style="color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div><span style="color: #6a9955;">// 자바스크립트 엔진은 단 하나의 실행 컨텍스트를 갖기 때문에 두 가지 이상의 테스크를 동시에 실행할 수 없다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 자바스크립트 엔진은 싱글 스레드로 동작한다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 이런 이유로 타이머 함수 setTimeout 과 setInterval 은 비동기 처리 방식으로 동작한다.</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">timerId</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #d4d4d4;">((</span><span style="color: #9cdcfe;">name</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">phrase</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">name</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">phrase</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">), </span><span style="color: #b5cea8;">2000</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'inhui'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'hello'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #dcdcaa;">clearInterval</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">timerId</span><span style="color: #d4d4d4;">);</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">count</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">timerId2</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">setInterval</span><span style="color: #d4d4d4;">((</span><span style="color: #9cdcfe;">a</span><span style="color: #d4d4d4;">,</span><span style="color: #9cdcfe;">b</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">count</span><span style="color: #d4d4d4;">++ &gt; </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">) </span><span style="color: #dcdcaa;">clearInterval</span><span style="color: #d4d4d4;">(</span><span style="color: #4fc1ff;">timerId2</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">else</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">console</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">log</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">`</span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">a</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;"> </span><span style="color: #569cd6;">${</span><span style="color: #9cdcfe;">b</span><span style="color: #569cd6;">}</span><span style="color: #ce9178;">`</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; }, </span><span style="color: #b5cea8;">1000</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'inhui'</span><span style="color: #d4d4d4;">, </span><span style="color: #ce9178;">'hello'</span><span style="color: #d4d4d4;">);</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 디바운스와 스로틀</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// scroll, resize, input, mousemove 같은 이벤트는 짧은 시간 간격으로 연속해서 발생한다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 이러한 이벤트에 바인딩한 이벤트 핸들러는 과도하게 호출되어 성능에 문제를 일으킬 수 있다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 디바운스와 스로틀은 짧은 시간 간격으로 연속해서 발생하는 이벤트를 그룹화해서 과도한 이벤트 핸들러의 호출을 방지하는 프로그래밍 기법이다.</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">$button</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">document</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">querySelector</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'#clickButton'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">$normalMsg</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">document</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">querySelector</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'.normal-msg'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">$debounceMsg</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">document</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">querySelector</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'.debounce-msg'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">$throttleMsg</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">document</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">querySelector</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'.throttle-msg'</span><span style="color: #d4d4d4;">);</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">debounce</span><span style="color: #d4d4d4;"> = (</span><span style="color: #9cdcfe;">callback</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">delay</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> (...</span><span style="color: #9cdcfe;">args</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;">) </span><span style="color: #dcdcaa;">clearTimeout</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">callback</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">delay</span><span style="color: #d4d4d4;">, ...</span><span style="color: #9cdcfe;">args</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">throttle</span><span style="color: #d4d4d4;"> = (</span><span style="color: #9cdcfe;">callback</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">delay</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> (...</span><span style="color: #9cdcfe;">args</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;">) </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #d4d4d4;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">callback</span><span style="color: #d4d4d4;">(...</span><span style="color: #9cdcfe;">args</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }, </span><span style="color: #9cdcfe;">delay</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #4fc1ff;">$button</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">addEventListener</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'click'</span><span style="color: #d4d4d4;">, () </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #4fc1ff;">$normalMsg</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">textContent</span><span style="color: #d4d4d4;"> = +</span><span style="color: #4fc1ff;">$normalMsg</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">textContent</span><span style="color: #d4d4d4;"> + </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; });</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #4fc1ff;">$button</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">addEventListener</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'click'</span><span style="color: #d4d4d4;">, </span><span style="color: #dcdcaa;">debounce</span><span style="color: #d4d4d4;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #4fc1ff;">$debounceMsg</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">textContent</span><span style="color: #d4d4d4;"> = +</span><span style="color: #4fc1ff;">$debounceMsg</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">textContent</span><span style="color: #d4d4d4;"> + </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; }, </span><span style="color: #b5cea8;">500</span><span style="color: #d4d4d4;">));</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #4fc1ff;">$button</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">addEventListener</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'click'</span><span style="color: #d4d4d4;">, </span><span style="color: #dcdcaa;">throttle</span><span style="color: #d4d4d4;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #4fc1ff;">$throttleMsg</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">textContent</span><span style="color: #d4d4d4;"> = +</span><span style="color: #4fc1ff;">$throttleMsg</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">textContent</span><span style="color: #d4d4d4;"> + </span><span style="color: #b5cea8;">1</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; }, </span><span style="color: #b5cea8;">500</span><span style="color: #d4d4d4;">));</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 디바운스</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 디바운스는 짧은 시간 간격으로 이벤트가 연속해서 발생하면 이벤트 핸들러를 호출하지 않다가 일정 시간이 경과한 이후에 이벤트 핸들러가 한 번만 호출되도록 한다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 즉, 디바운스는 짧은 시간 간격으로 발생하는 이벤트를 그룹화해서 마지막에 한 번만 호출되도록 한다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 예를 들어, 텍스트 입력 필드에서 input 이벤트가 짧은 시간 간격으로 연속해서 발생하는 경우를 살펴보자.</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">$textarea</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">document</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">querySelector</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'#textarea'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">$msg</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">document</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">querySelector</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'.msg'</span><span style="color: #d4d4d4;">);</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #4fc1ff;">$textarea</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">addEventListener</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'input'</span><span style="color: #d4d4d4;">, </span><span style="color: #dcdcaa;">debounce</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">e</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #4fc1ff;">$msg</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">textContent</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">e</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">target</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">value</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; }, </span><span style="color: #b5cea8;">500</span><span style="color: #d4d4d4;">));</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// input 이벤트는 사용자가 텍스트 입력 필드에 값을 입력할 때마다 연속해서 발생한다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 만약 input 이벤트 핸들러에서 사용자가 입력 필드에 입력한 값으로 Ajax 요청과 같은 무거운 처리를 수행한다면 사용자가 아직 입력을 완료하지 않았어도 ajax 요청이 전송될 것이다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 이는 서버에도 부담을 주는 불필요한 처리이므로 사용자가 입력을 완료했을 때 한 번만 ajax 요청을 전송하는 것이 바람직하다.</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 사용자가 입력을 완료했는지 여부는 정확히 알 수 없으므로 일정 시간 동안 텍스트 입력 필드에 값을 입력하지 않으면 입력이 완료된 것으로 간주한다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 이를 위해 debounce 함수가 반환한 함수는 debounce 함수에 두 번째 인수로 전달한 시간보다 짧은 간격으로 이벤트가 발생하면 이전 타이머를 취소하고 새로운 타이머를 재설정한다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 따라서 delay 보다 짧은 간격으로 이벤트가 연속해서 발생하면 debounce 함수의 첫 번쨰 인수로 전달한 콜백 함수는 호출되지 않다가 delay 동안 input 이벤트가 더 이상 발생하지 않으면 한 번만 호출된다.</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 이처럼 짧은 시간 간격으로 이벤트가 연속해서 발생하면 이벤트 핸들러를 호출하지 않다가 일정 시간 동안 이벤트가 더 이상 발생하지 않으면 이벤트 핸들러가 한 번만 호출되도록 하는 디바운스는 resize 이벤트 처리나 input 요소에 입력된 값으로 ajax 요청하는 입력 필드 자동완성 ui 구현, 버튼 중복 클릭 방지 처리 등에 유용하게 사용된다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 위 예제의 debounce 함수는 이해를 위해 간략하게 구현하여 완전하지 않다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 실무에서 Underscore 의 debounce 함수나 Lodash 의 debounce 함수를 사용하는것을 권장한다.</span></div><br><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 스로틀</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 스로틀은 짧은 시간 간격으로 이벤트가 연속해서 발생하더라도 일정 시간 간격으로 이벤트 핸들러가 최대 한 번만 호출되도록 한다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 즉 스로틀은 짧은 시간 간격으로 연속해서 발생하는 이벤트를 그룹화해서 일정 시간 단위로 이벤트 핸들러가 호출되도록 호출 주기를 만든다.</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">$container</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">document</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">querySelector</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'.container'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">$normalCount</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">document</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">querySelector</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'.normal-count'</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #4fc1ff;">$throttleCount</span><span style="color: #d4d4d4;"> = </span><span style="color: #9cdcfe;">document</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">querySelector</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'.throttle-count'</span><span style="color: #d4d4d4;">);</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #dcdcaa;">throttle</span><span style="color: #d4d4d4;"> = (</span><span style="color: #9cdcfe;">callback</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">delay</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;"> (...</span><span style="color: #9cdcfe;">args</span><span style="color: #d4d4d4;">) </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;">) </span><span style="color: #c586c0;">return</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;"> = </span><span style="color: #dcdcaa;">setTimeout</span><span style="color: #d4d4d4;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #dcdcaa;">callback</span><span style="color: #d4d4d4;">(...</span><span style="color: #9cdcfe;">args</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #9cdcfe;">timerId</span><span style="color: #d4d4d4;"> = </span><span style="color: #569cd6;">null</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }, </span><span style="color: #9cdcfe;">delay</span><span style="color: #d4d4d4;">);</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; }</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">normalCount</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #4fc1ff;">$container</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">addEventListener</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'scroll'</span><span style="color: #d4d4d4;">, () </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #4fc1ff;">$normalCount</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">textContent</span><span style="color: #d4d4d4;"> = ++</span><span style="color: #9cdcfe;">normalCount</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; });</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #569cd6;">let</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">throttleCount</span><span style="color: #d4d4d4;"> = </span><span style="color: #b5cea8;">0</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #4fc1ff;">$container</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">addEventListener</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'scroll'</span><span style="color: #d4d4d4;">, </span><span style="color: #dcdcaa;">throttle</span><span style="color: #d4d4d4;">(() </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> {</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #4fc1ff;">$throttleCount</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">textContent</span><span style="color: #d4d4d4;"> = ++</span><span style="color: #9cdcfe;">throttleCount</span><span style="color: #d4d4d4;">;</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; }, </span><span style="color: #b5cea8;">100</span><span style="color: #d4d4d4;">));</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// scroll 이벤트는 사용자가 스크롤할 때 짧은 시간 간격으로 연속해서 발생한다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 이처럼 짧은 시간 간격으로 연속해서 발생하는 이벤트의 과도한 이벤트 핸들러의 호출을 방지하기 위해 throttle 함수는 이벤트를 그룹화해서 일정 시간 단위로 이벤트 핸들러가 호출되도록 호출 주기를 만든다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// throttle 함수가 반환한 함수는 throttle 함수에 두 번째 인수로 전달한 시간이 경과하기 이전에 이벤트가 발생하면 아무것도 하지 않다가 delay 시간이 경과했을 때 이벤트가 발생하면 콜백 함수를 호출하고 새로운 타이머를 재설정한다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 따라서 delay 시간 간격으로 콜백 함수가 호출된다.</span></div><br><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 이처럼 짧은 시간 간격으로 연속해서 발생하는 이벤트를 그룹화해서 일정 시간 간격으로 이벤트 핸들러를 호출하는 스로틀은 scroll 이벤트 처리나 무한 스크롤 ui 구현 등에 유용하게 사용된다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 위 예제의 throttle 함수는 이해를 위해 간략하게 구현하여 완전하지 않다.</span></div><div><span style="color: #d4d4d4;">&nbsp; &nbsp; </span><span style="color: #6a9955;">// 실무에서는 Underscore 의 throttle 함수나 lodash 의 throttle 함수를 사용하는 것을 권장한다.</span></div></div>